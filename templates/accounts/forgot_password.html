{% extends "accounts/accountbase.html" %}

{% block title %}Forgot password{% endblock %}

{% block content %}
<div class="form-page">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        <div class="form-card p-4 p-md-5">
          <div class="text-center mb-4">
            <i class="bi bi-key text-primary" style="font-size: 2.5rem;" aria-hidden="true"></i>
            <h1 class="h3 fw-bold mt-3 mb-1">Forgot password?</h1>
            <p class="text-muted small mb-0">Enter your username or email. We’ll send you a temporary password if your
              account exists.</p>
          </div>

          <div id="form-errors-live" class="alert alert-danger {% if not form.errors %}d-none{% endif %}" role="alert"
            aria-live="polite" aria-atomic="true">
            {% for field in form %}
            {% for err in field.errors %}
            <div>{{ err }}</div>
            {% endfor %}
            {% endfor %}
            {% for err in form.non_field_errors %}
            <div>{{ err }}</div>
            {% endfor %}
          </div>

          <form method="post" action="{% url 'accounts:forgot_password' %}" novalidate data-validate
            id="forgot-password-form">
            {% csrf_token %}

            <div class="mb-3">
              <label for="id_username_or_email" class="form-label required">{{ form.username_or_email.label }}</label>
              <input type="text" name="username_or_email" id="id_username_or_email"
                value="{{ form.username_or_email.value|default:'' }}"
                class="form-control {% if form.username_or_email.errors %}is-invalid{% endif %}"
                placeholder="Enter your username or email" autocomplete="username" required
                aria-describedby="username-help {% if form.username_or_email.errors %}id_username_or_email_error{% endif %}"
                aria-invalid="{% if form.username_or_email.errors %}true{% else %}false{% endif %}">
              <div id="username-help" class="form-text">We’ll send a temporary password to your registered email.</div>
              {% if form.username_or_email.errors %}
              <div id="id_username_or_email_error" class="invalid-feedback" role="alert">{{
                form.username_or_email.errors.0 }}</div>
              {% endif %}
            </div>

            <button type="submit" class="btn btn-primary w-100 py-2 fw-semibold">Send temporary password</button>
          </form>

          <p class="text-center text-muted small mt-4 mb-0">
            <a href="{% url 'accounts:login' %}" class="text-primary text-decoration-none">Back to login</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}